(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[25],{"0jlH":function(e,t,n){"use strict";var r=n("g09b");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=r(n("qIgq")),c=d(n("q1tI")),i=n("Hg0r"),u=n("Hx5s"),a=n("ArA+"),f=n("s4NR"),l=n("N8P2");function s(e){if("function"!==typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(s=function(e){return e?n:t})(e)}function d(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==typeof e&&"function"!==typeof e)return{default:e};var n=s(t);if(n&&n.has(e))return n.get(e);var r={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var c in e)if("default"!==c&&Object.prototype.hasOwnProperty.call(e,c)){var i=o?Object.getOwnPropertyDescriptor(e,c):null;i&&(i.get||i.set)?Object.defineProperty(r,c,i):r[c]=e[c]}return r.default=e,n&&n.set(e,r),r}var p=function(e){var t=e.dispatch,n=e.settings,r=(0,c.useState)(!1),i=(0,o.default)(r,2),s=i[0],d=i[1],p=e.children,g=e.loading,y=!!localStorage.getItem("x-access-token"),v=(0,f.stringify)({redirect:window.location.href});(0,c.useEffect)(function(){d(!0),t&&t({type:"user/fetchCurrent"})},[]),(0,c.useEffect)(function(){t&&t({type:"settings/fetchConfig",callback:function(){document.getElementById("title-icon").href=n.titleIcon,d(!0)}})},[]);var w=function(){return y&&(0,l.initWebSocket)(),!y&&g||!s?c.default.createElement(u.PageLoading,null):y?p:c.default.createElement(a.Redirect,{to:"/user/login?".concat(v)})};return w()},g=(0,i.connect)(function(e){var t=e.user,n=e.settings,r=e.loading;return{currentUser:t.currentUser,settings:n,loading:r.models.user}})(p);t.default=g}}]);